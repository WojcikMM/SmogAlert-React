(this["webpackJsonpsmog-alert-app"]=this["webpackJsonpsmog-alert-app"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={LOCAL_STORAGE_KEYS:{SELECTED_STATION_ID:"SELECTED_STATION_ID",STATIONS_ARRAY:"STATIONS_ARRAY"},API_URLS:{GET_STATIONS:"https://cors-anywhere.herokuapp.com/api.gios.gov.pl/pjp-api/rest/station/findAll",GET_AIR_INDEX:"https://cors-anywhere.herokuapp.com/api.gios.gov.pl/pjp-api/rest/aqindex/getIndex"},DEFAULTS:{INDEX_LEVEL:3},LABELS:{PREVIEW:{INDEXES:{NO2:"NO2",C6H6:"C6H6",CO:"CO",O3:"O3",PM10:"PM 10",PM25:"PM 2.5",SO:"SO",ST:"Summary"}}}}},11:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"m",(function(){return d})),n.d(t,"n",(function(){return s})),n.d(t,"l",(function(){return f})),n.d(t,"k",(function(){return I})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return E})),n.d(t,"h",(function(){return m}));var a="FETCH_STATIONS_START",r="FETCH_STATIONS_SUCCESS",i="FETCH_STATIONS_FAIL",o="FETCH_STATIONS_FROM_CACHE",l="FETCH_AIR_INDEX_START",c="FETCH_AIR_INDEX_SUCCESS",u="FETCH_AIR_INDEX_FAILS",d=function(){return{type:a}},s=function(e){return{type:r,stations:e}},f=function(e){return{type:o,stations:e}},I=function(e){return{type:i,cause:e}},S=function(e){return{type:l,selectedStationId:e}},E=function(e){return{type:c,airIndex:e}},m=function(e){return{type:u,cause:e}}},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(10),r=n(40),i=function(e,t){var n=+(localStorage.getItem(a.a.LOCAL_STORAGE_KEYS.SELECTED_STATION_ID)||"");navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){var a=function(e,t){function n(e,t){return function(e,t){return Math.sqrt(e*e+t*t)}(e.coords.latitude-t.gegrLat,e.coords.longitude-t.gegrLon)}return t.reduce((function(t,a){return n(e,t)<n(e,a)?t:a}))}(n,t);Object(r.a)(a.id)(e)}),(function(){o(e)})):n&&o(e)};function o(e){var t=+(localStorage.getItem(a.a.LOCAL_STORAGE_KEYS.SELECTED_STATION_ID)||"");t&&Object(r.a)(t)(e)}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(11),r=n(10),i=function(e){return function(t){if(e)return localStorage.setItem(r.a.LOCAL_STORAGE_KEYS.SELECTED_STATION_ID,e.toString()),t(Object(a.i)(e)),fetch("".concat(r.a.API_URLS.GET_AIR_INDEX,"/").concat(e)).then((function(e){return e.json()})).then((function(e){return t(Object(a.j)(e))})).catch((function(e){return t(Object(a.h)(e))}));t(Object(a.h)(new Error("Invalid stationId.")))}}},51:function(e){e.exports=JSON.parse('{"a":[{"name":"English","code":"en"},{"name":"Polski","code":"pl"}],"b":{"subHeader":["Check the air quality in your area","Sprawd\u017a jako\u015b\u0107 powietrza w swojej okolicy"],"stationsSelectorLabel":["Stations:","Stacje pomiarowe:"],"airIndexPreviewTitle":["Summary:","Podsumowanie:"],"airIndexPreviewTableColumnType":["Type","Typ"],"airIndexPreviewTableColumnValue":["Value","Warto\u015b\u0107"],"airIndexPreviewTableColumnDate":["Data date","Data danych"],"airIndexDescriptionNoData":["No data.","Brak danych."]}}')},52:function(e,t,n){"use strict";var a=n(56);n.o(a,"fetchAirIndex")&&n.d(t,"fetchAirIndex",(function(){return a.fetchAirIndex})),n.o(a,"fetchStations")&&n.d(t,"fetchStations",(function(){return a.fetchStations}));var r=n(59);n.d(t,"fetchStations",(function(){return r.a}));var i=n(40);n.d(t,"fetchAirIndex",(function(){return i.a}));n(39)},56:function(e,t,n){"use strict";var a=n(57);n.o(a,"fetchAirIndex")&&n.d(t,"fetchAirIndex",(function(){return a.fetchAirIndex})),n.o(a,"fetchStations")&&n.d(t,"fetchStations",(function(){return a.fetchStations}));var r=n(58);n.o(r,"fetchAirIndex")&&n.d(t,"fetchAirIndex",(function(){return r.fetchAirIndex})),n.o(r,"fetchStations")&&n.d(t,"fetchStations",(function(){return r.fetchStations}))},57:function(e,t){},58:function(e,t){},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(11),r=n(10),i=n(39),o=function(e,t){var n=e.stationName.toLowerCase(),a=t.stationName.toLowerCase();return n>a?1:n<a?-1:0},l=function(){return function(e){if(null!==localStorage.getItem(r.a.LOCAL_STORAGE_KEYS.STATIONS_ARRAY)){var t=JSON.parse(localStorage.getItem(r.a.LOCAL_STORAGE_KEYS.STATIONS_ARRAY)||"[]");e(Object(a.l)(t)),Object(i.a)(e,t)}else e(Object(a.m)()),fetch(r.a.API_URLS.GET_STATIONS).then((function(e){return e.json()})).then((function(e){return e.sort(o)})).then((function(t){return localStorage.setItem(r.a.LOCAL_STORAGE_KEYS.STATIONS_ARRAY,JSON.stringify(t)),e(Object(a.n)(t)),Object(i.a)(e,t),t})).catch((function(t){return e(Object(a.k)(t))}))}}},76:function(e,t,n){e.exports=n(93)},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(7),o=n.n(i),l=n(15),c=n(16),u=n(20),d=n(19),s=n(25),f=n(32),I=n(13),S=n(11),E={loadingStations:!1,loadingAirIndex:!1,stations:[],selectedStationId:0,airIndexModel:null},m=n(61),p=n(18),v=Object(f.c)({localize:p.c,main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(console.log("Action received: ",t.type),t.type){case S.f:return Object(I.a)(Object(I.a)({},e),{},{loadingStations:!0});case S.e:case S.g:return Object(I.a)(Object(I.a)({},e),{},{loadingStations:!1,stations:t.stations});case S.d:return Object(I.a)(Object(I.a)({},e),{},{loadingStations:!1,stations:[]});case S.b:return Object(I.a)(Object(I.a)({},e),{},{selectedStationId:t.selectedStationId,loadingAirIndex:!0});case S.c:return Object(I.a)(Object(I.a)({},e),{},{airIndexModel:t.airIndex,loadingAirIndex:!1});case S.a:return Object(I.a)(Object(I.a)({},e),{},{loadingAirIndex:!1,selectedStationId:0});default:return console.warn("There is no handler for event: ".concat(t.type)),e}}}),h=Object(f.e)(v,Object(f.d)(Object(f.a)(m.a))),b=(n(90),n(51)),O=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Smog Alert"),r.a.createElement("p",null,this.props.subHeader),r.a.createElement("h4",null,"If no data loaded please click",r.a.createElement("a",{href:"https://cors-anywhere.herokuapp.com",target:"_blank"},"here"),"and enable gateway for demo"))}}]),n}(r.a.Component),A=Object(s.b)((function(e){return{subHeader:Object(p.b)(e.localize)("subHeader")}}))(O),T=n(52),g=(n(91),n(136)),j=n(133),x=n(134),L=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).labelId="stations-selector-label",e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStations()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{id:this.labelId},this.props.label),r.a.createElement(j.a,{label:this.labelId,className:"stations-selector",value:this.props.selectedStationId,onChange:this.props.handleStationChange},r.a.createElement(x.a,{disabled:!0,value:"0"}),this.props.stations.map((function(e){return r.a.createElement(x.a,{key:e.id,value:e.id},e.stationName)}))))}}]),n}(r.a.Component),_=Object(s.b)((function(e){return{stations:e.main.stations,selectedStationId:e.main.selectedStationId,label:Object(p.b)(e.localize)("stationsSelectorLabel")}}),(function(e){return{fetchStations:function(){return e(Object(T.fetchStations)())},handleStationChange:function(t){return e(Object(T.fetchAirIndex)(t.target.value))}}}))(L),D=n(10),C=n(126),y=n(137),N=n(127),R=n(128),w=n(129),M=n(130),P=n(131),k=n(132),H=(n(92),n(135)),F=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("span",null,void 0!==this.props.indexId?r.a.createElement(H.a,{value:5-this.props.indexId,readOnly:!0}):r.a.createElement("div",null,this.props.noDataLabel))}}]),n}(r.a.Component),X=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,null,r.a.createElement(y.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"air-index-preview__summary-title"},this.props.translations.title),r.a.createElement(F,{noDataLabel:this.props.translations.noDataLabel,indexId:this.props.summaryId}))}),r.a.createElement(N.a,null,r.a.createElement("div",{className:"air-index-preview__sub-header"},"Details:"),r.a.createElement(R.a,null,r.a.createElement(w.a,null,r.a.createElement(M.a,null,r.a.createElement(P.a,null,this.props.translations.tableColumns.type),r.a.createElement(P.a,{align:"right"},this.props.translations.tableColumns.value))),r.a.createElement(k.a,null,this.props.indexes.map((function(t){return r.a.createElement(M.a,{key:t.label},r.a.createElement(P.a,null,t.label),r.a.createElement(P.a,{align:"right"},r.a.createElement(F,{noDataLabel:e.props.translations.noDataLabel,indexId:t.id})))})))))))}}]),n}(r.a.Component),V=Object(s.b)((function(e){var t,n,a,r,i,o,l,c,u,d,s,f,I,S,E,m,v,h,b,O,A,T,g,j,x=Object(p.b)(e.localize);return{indexes:[{id:null===(t=e.main.airIndexModel)||void 0===t||null===(n=t.c6h6IndexLevel)||void 0===n?void 0:n.id,date:null===(a=e.main.airIndexModel)||void 0===a?void 0:a.c6h6SourceDataDate,label:D.a.LABELS.PREVIEW.INDEXES.C6H6},{id:null===(r=e.main.airIndexModel)||void 0===r||null===(i=r.coIndexLevel)||void 0===i?void 0:i.id,date:null===(o=e.main.airIndexModel)||void 0===o?void 0:o.coSourceDataDate,label:D.a.LABELS.PREVIEW.INDEXES.CO},{id:null===(l=e.main.airIndexModel)||void 0===l||null===(c=l.no2IndexLevel)||void 0===c?void 0:c.id,date:null===(u=e.main.airIndexModel)||void 0===u?void 0:u.no2SourceDataDate,label:D.a.LABELS.PREVIEW.INDEXES.NO2},{id:null===(d=e.main.airIndexModel)||void 0===d||null===(s=d.o3IndexLevel)||void 0===s?void 0:s.id,date:null===(f=e.main.airIndexModel)||void 0===f?void 0:f.o3SourceDataDate,label:D.a.LABELS.PREVIEW.INDEXES.O3},{id:null===(I=e.main.airIndexModel)||void 0===I||null===(S=I.pm10IndexLevel)||void 0===S?void 0:S.id,date:null===(E=e.main.airIndexModel)||void 0===E?void 0:E.pm10SourceDataDate,label:D.a.LABELS.PREVIEW.INDEXES.PM10},{id:null===(m=e.main.airIndexModel)||void 0===m||null===(v=m.pm25IndexLevel)||void 0===v?void 0:v.id,date:null===(h=e.main.airIndexModel)||void 0===h?void 0:h.pm25SourceDataDate,label:D.a.LABELS.PREVIEW.INDEXES.PM25},{id:null===(b=e.main.airIndexModel)||void 0===b||null===(O=b.so2IndexLevel)||void 0===O?void 0:O.id,date:null===(A=e.main.airIndexModel)||void 0===A?void 0:A.so2SourceDataDate,label:D.a.LABELS.PREVIEW.INDEXES.SO}],summaryId:null===(T=e.main.airIndexModel)||void 0===T||null===(g=T.stIndexLevel)||void 0===g?void 0:g.id,summaryDate:null===(j=e.main.airIndexModel)||void 0===j?void 0:j.stSourceDataDate,translations:{title:x("airIndexPreviewTitle"),noDataLabel:x("airIndexDescriptionNoData"),tableColumns:{type:x("airIndexPreviewTableColumnType"),value:x("airIndexPreviewTableColumnValue"),date:x("airIndexPreviewTableColumnDate")}}}}))(X),Y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).defaultTranslations={languages:b.a,translation:b.b,options:{renderToStaticMarkup:!1}},e}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(s.a,{store:h},r.a.createElement(p.a,{store:h,initialize:this.defaultTranslations},r.a.createElement(A,null),r.a.createElement(_,null),r.a.createElement(V,null)))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[76,1,2]]]);
//# sourceMappingURL=main.8f9a71bb.chunk.js.map